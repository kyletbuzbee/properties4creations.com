---
layout: base.njk
title: "Contact Us | Properties 4 Creations"
description: "Affordable housing solutions for families and veterans in East Texas. Transparent pricing, premium renovations, and community impact."
banner:
  title: "We're Here to Help"
  subtitle: "Reach out to learn more about our homes, programs, or how we serve East Texas families and veterans."
  image: "hero-contact-banner.webp"
  eyebrow: "Local Support, Real Answers"
  ctaText: "Start Your Journey"
  ctaHref: "/get-started/"
---

<section class="max-w-4xl mx-auto py-12 px-4">
    <div class="form-container">
        <form id="contact-form" action="" method="POST">
            <input type="hidden" name="_subject" value="Contact Form Inquiry">
            <input type="hidden" name="_next" value="/thank-you/">

            <div class="grid md:grid-cols-2 gap-6">
                <div class="form-group required" data-field="name">
                    <label for="contact-name">Name <span class="required">*</span></label>
                    <input type="text" id="contact-name" name="name" required aria-required="true" placeholder="Your Name"
                        autocomplete="name">
                    <div class="error-message hidden" aria-hidden="true" id="name-error"></div>
                    <div class="success-message hidden" aria-hidden="true" id="name-success"></div>
                </div>
                <div class="form-group required" data-field="email">
                    <label for="contact-email">Email <span class="required">*</span></label>
                    <input type="email" id="contact-email" name="email" required aria-required="true" placeholder="email@example.com"
                        autocomplete="email">
                    <div class="error-message hidden" aria-hidden="true" id="email-error"></div>
                    <div class="success-message hidden" aria-hidden="true" id="email-success"></div>
                </div>
            </div>

            <div class="form-group" data-field="phone">
                <label for="contact-phone">Phone Number
                    <span class="text-brand-walnut text-xs font-normal">(Optional)</span>
                </label>
                <input type="tel" id="contact-phone" name="phone" placeholder="(903) 555-0123"
                    autocomplete="tel">
                <div class="help-text">We'll call if we need more information</div>
                <div class="error-message hidden" aria-hidden="true" id="phone-error"></div>
                <div class="success-message hidden" aria-hidden="true" id="phone-success"></div>
            </div>

            <div class="form-group required" data-field="message">
                <label for="contact-message">Message <span class="required">*</span></label>
                <textarea id="contact-message" name="message" placeholder="Tell us how we can help you with your housing needs..." rows="4"
                    required aria-required="true"></textarea>
                <div class="error-message hidden" aria-hidden="true" id="message-error"></div>
                <div class="success-message hidden" aria-hidden="true" id="message-success"></div>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="veteran-contact" name="veteran" value="yes" aria-describedby="veteran-desc">
                <label for="veteran-contact">
                    <span class="text-brand-walnut font-medium">U.S. Military Veteran</span>
                    <span id="veteran-desc" class="text-sm text-slate-600 block">Check if you'd like priority for veteran housing
                        assistance</span>
                </label>
            </div>

            <button type="submit" class="btn-primary w-full text-lg btn-lg" data-loading-text="Sending...">
                Send Message
            </button>

            <p class="text-xs text-slate-500 text-center mt-4">
                We respect your privacy and will never share your information.
                Response typically within 24 hours.
            </p>
        </form>

        <!-- Loading overlay -->
        <div class="form-loading-overlay" id="form-loading-overlay">
            <div class="form-spinner"></div>
            <div class="loading-text">Sending your message...</div>
        </div>
    </div>
</section>

<!-- ContactPage Structured Data -->
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "ContactPage",
    "@id": "https://properties4creations.com/contact/#contactPage",
    "mainEntity": {
        "@type": "Organization",
        "@id": "https://properties4creations.com/#organization",
        "name": "Properties 4 Creations",
        "url": "https://properties4creations.com",
        "contactPoint": {
            "@type": "ContactPoint",
            "telephone": "+1-903-283-1770",
            "email": "contact@properties4creations.com",
            "contactType": "Customer Service",
            "availableLanguage": "English",
            "hoursAvailable": {
                "@type": "OpeningHoursSpecification",
                "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
                "opens": "09:00",
                "closes": "18:00"
            }
        },
        "address": {
            "@type": "PostalAddress",
            "addressLocality": "Tyler",
            "addressRegion": "TX",
            "postalCode": "75701",
            "addressCountry": "US"
        }
    },
    "breadcrumb": {
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "Home",
                "item": "https://properties4creations.com"
            },
            {
                "@type": "ListItem",
                "position": 2,
                "name": "Contact",
                "item": "https://properties4creations.com/contact/"
            }
        ]
    }
}
</script>

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const contactForm = document.getElementById('contact-form');
    const loadingOverlay = document.getElementById('form-loading-overlay');
    const submitBtn = contactForm.querySelector('button[type="submit"]');

    // Progressive form enhancement
    contactForm.addEventListener('submit', async function(e) {
        e.preventDefault();

        // Get form data
        const formData = new FormData(contactForm);
        const data = Object.fromEntries(formData.entries());

        // Basic validation
        if (!data.name || !data.email || !data.message) {
            showError('Please fill in all required fields.');
            return;
        }

        // Show loading state
        setLoading(true);

        try {
            // Submit to Google Apps Script
            const response = await submitContactForm(data);

            if (response.success) {
                // Show success message
                showSuccess('Thank you! Your message has been sent. We\'ll respond within 24 hours.');

                // Reset form
                contactForm.reset();

                // Redirect after delay
                setTimeout(() => {
                    window.location.href = '/thank-you/';
                }, 2000);
            } else {
                throw new Error(response.message || 'Failed to send message');
            }
        } catch (error) {
            console.error('Form submission error:', error);
            showError(error.message || 'Failed to send message. Please try again or call us directly.');
        } finally {
            setLoading(false);
        }
    });

    function setLoading(loading) {
        if (loading) {
            submitBtn.disabled = true;
            submitBtn.textContent = submitBtn.dataset.loadingText || 'Sending...';
            loadingOverlay.style.display = 'flex';
            showStatus('');
        } else {
            submitBtn.disabled = false;
            submitBtn.textContent = 'Send Message';
            loadingOverlay.style.display = 'none';
        }
    }

    function showSuccess(message) {
        showStatus(message, 'success');
    }

    function showError(message) {
        showStatus(message, 'error');
    }

    function showStatus(message, type = '') {
        if (message) {
            // Remove any existing notifications
            const existingAlerts = contactForm.parentNode.querySelectorAll('.notification-alert');
            existingAlerts.forEach(alert => alert.remove());

            // Create notification element
            const alertDiv = document.createElement('div');
            alertDiv.className = `notification-alert ${type === 'error' ? 'bg-red-50 border border-red-200 text-red-800' : 'bg-green-50 border border-green-200 text-green-800'} px-4 py-3 rounded-lg mb-6 flex items-start gap-3`;

            // Add proper ARIA attributes
            alertDiv.setAttribute('role', 'alert');
            alertDiv.setAttribute('aria-live', 'assertive');

            const iconDiv = document.createElement('div');
            iconDiv.className = 'flex-shrink-0';

            if (type === 'error') {
                iconDiv.innerHTML = `
                    <svg class="h-5 w-5 text-red-400" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                    </svg>
                `;
            } else {
                iconDiv.innerHTML = `
                    <svg class="h-5 w-5 text-green-400" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                    </svg>
                `;
            }

            const contentDiv = document.createElement('div');
            contentDiv.innerHTML = `
                <h3 class="text-sm font-medium ${type === 'error' ? 'text-red-800' : 'text-green-800'}">
                    ${type === 'error' ? 'Error' : 'Success'}
                </h3>
                <div class="mt-2 text-sm ${type === 'error' ? 'text-red-700' : 'text-green-700'}">
                    <p>${message}</p>
                    ${type === 'error' ? '<p class="mt-2"><a href="tel:+19032831770" class="text-red-600 underline">Call us directly: (903) 283-1770</a></p>' : ''}
                </div>
            `;

            alertDiv.appendChild(iconDiv);
            alertDiv.appendChild(contentDiv);

            // Insert notification above the form
            contactForm.parentNode.insertBefore(alertDiv, contactForm);

            // Auto-remove after 10 seconds for errors, 8 seconds for success
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, type === 'error' ? 15000 : 10000);
        }
    }

    // Enhanced Google Apps Script submission
    async function submitContactForm(data) {
        const GAS_URL = 'https://script.google.com/macros/s/AKfycbwxz5eoaGgYOoaKTKEfMm2jHo7buxNnHyu5lkZCkhDYLfbRqNRUW90Sk9yrXGRLjMM3Gw/exec';

        const payload = {
            name: data.name,
            email: data.email,
            phone: data.phone || '',
            message: data.message,
            veteran: data.veteran === 'yes' ? 'Yes' : 'No',
            timestamp: new Date().toISOString(),
            source: 'contact'
        };

        const response = await fetch(GAS_URL, {
            method: 'POST',
            mode: 'cors',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(payload)
        });

        if (!response.ok) {
            try {
                const result = await response.json();
                return { success: false, message: result.error || 'Server error' };
            } catch {
                return { success: false, message: 'Network error' };
            }
        }

        const result = await response.json();
        return { success: result.success, message: result.message };
    }
});
</script>
{% endblock %}
